# 28-&&和||操作符



## ||（或）

||的基础用法（所有语言通用的）这里就简单提一下，一真则为真，全假才为假



**JavaScript的附加特性**

示例：

```js
result = value1 || value2 || value3;
// 如果是给定多个值的或运算
```

||运算会做一下事情：

1. 从左到右一次计算操作数
2. 处理一个操作数会转化为布尔值，如果结果是true，则停止计算直接返回当前操作数的初始值
3. 如果所有值都被计算过了（也就是全部转换结果都是false，结合上面2），则会返回最后一个操作数的初始值



示例：

```js
alert( 1 || 0 ); // 1（1 是真值）
alert( true || 'no matter what' ); //（true 是真值）
alert( null || 1 ); // 1（1 是第一个真值）
alert( null || 0 || 1 ); // 1（第一个真值）
alert( undefined || null || 0 ); // 0（所有的转化结果都是 false，返回最后一个值）
```



**所以，这个规则就诞生出一些有趣的用法：短路取值**

操作数不仅仅可以是值，还可以是任意表达式。或运算会从左到右计算并测试每个操作数。当找到第一个真值，计算就会停止，并返回这个值。这个过程就叫做“短路取值”，因为它尽可能地减少从左到右计算的次数。

所以说：第二个值就会有一定的副作用

示例：

```js
let x;
true || (x = 1);
alert(x); // undefined，因为 (x = 1) 没有被执行


let x;
false || (x = 1);
alert(x); // 1
// 这样就会执行
```





## &&（与）

&&的通用用法就是两个操作数都为真时，才为真，否则为false



与和或操作很像，**与操作寻找第一个假值**

如果多个操作数参与与运算：

```js
result = value1 && value2 && value3;
```

与运算 `&&` 做了如下的事：

1. 从左到右依次计算操作数。
2. 将处理每一个操作数时，都将其转化为布尔值。如果结果是 `false`，就停止计算，并返回这个操作数的初始值。
3. 如果所有的操作数都被计算过（也就是，转换结果都是 `true`），则返回最后一个操作数。

**换句话说，与操作符返回第一个假值，如果没有假值就返回最后一个值。**

上面的规则和或运算很像。**区别就是与运算返回第一个假值而或操作返回第一个真值。**

示例：

```js
// 如果第一个操作符是真值，
// 与操作返回第二个操作数：
alert( 1 && 0 ); // 0
alert( 1 && 5 ); // 5
// 如果第一个操作符是假值，
// 与操作直接返回它。第二个操作数被忽略
alert( null && 5 ); // null
alert( 0 && "no matter what" ); // 0
```



**可以利用规则来确定第一个值是否为假**

示例：

```js
alert( 1 && 2 && null && 3 ); // null

```



**如果都为真值，则返回最后一个值：**

```js
alert( 1 && 2 && 3 ); // 3，最后一个值
```



## ||和&&的优先级

与运算 `&&` 的优先级比或运算 `||` 要高。

所以代码 `a && b || c && d` 完全跟 `&&` 表达式加了括号一样：`(a && b) || (c && d)`。





## ！（非）

感叹符号 `!` 表示布尔非运算。

操作符接受一个参数，并按如下运作：

1. 将操作数转化为布尔类型：`true/false`。
2. 返回相反的值。

示例：

```js
alert( !true ); // false
alert( !0 ); // true
```



**两个非运算 `!!` 有时候用来将某个值转化为布尔类型：**

示例：

```js
alert( !!"non-empty string" ); // true
alert( !!null ); // false
```

也就是，第一个非运算将该值转化为布尔类型并取反，第二个非运算再次取反。最后我们就得到了一个任意值到布尔值的转化。



和一个内置函数Boolean一样

示例：

```js
alert( Boolean("non-empty string") ); // true
alert( Boolean(null) ); // false
```

