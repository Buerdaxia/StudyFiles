# 事件

事件就是文档或浏览器窗口中发生的一些特定的交互瞬间。

**当事件的响应函数被触发时，浏览器每次都会将一个事件对象作为实参传如响应函数中**

例如：a.onclick = function(event) {

​	event是自己写入的形参来接收外部浏览器的事件对象

}

给节点设置类名属性——className  例：变量.className = '类名'

## 事件冒泡问题(Bubble)

所谓的冒泡指的是事件的向上传导，当后代元素上的事件被触发时，其祖先元素事件也会被触发。（向上传递）

大部分情况冒泡事件还挺有用的.

注意：**必须是且是相同事件**

### 取消冒泡方式

如果不希望发生冒泡问题可以通过事件对象取消冒泡

这个事件对象就是上面那个event

event.cancelBibble = true; 取消冒泡

event.event.stopPropagation();

## 事件的委派

指将事件统一绑定给元素的共同祖先元素，这样后代元素上的事件上的事件触发时，会一直冒泡到祖先元素，从而通过祖先元素的响应函数来处理。



事件委派：是利用冒泡原理体现的。

## 事件的绑定

### 方法一：对象.事件 = function() {}

这种方式只能为一个元素的一个事件绑定一个响应函数，特殊情况下比较单一。

### 方法二：对象.addEventListener(参数1，参数2，参数3)

参数1：事件字符串"click"

参数2：回调函数 function(){}

参数3：是否在捕获阶段触发事件，需要一个布尔值，一般为false

使用方法二可以同时为一个元素的相同事件同时绑定多个响应函数。

注意：不支持ie8，addEventListener中的this是绑定事件对象。

还有一个问题：利用该方法不能使用return false；取消默认行为，**要使用event.preventDefault()来取消默认行为(ie8不支持)**。

### 方法三：对象.attachEvent(参数1，参数2)

参数1：绑定事件名字符串

参数2：回调函数

这个方法也可以同时绑定多个处理函数，不同的是它后绑定的先执行，和addEventListerner相反

注意：只能ie使用，attachEvent中的this是window。

所以综合绑定函数bind

```
      function bind(obj, eventStr, callback) {

​            if(obj.addEventListener) {

​                obj.addEventListener(eventStr, callback, false);

​            } else {

​                // 怎样修改this值

​                obj.attachEvent("on"+eventStr, function() {

​                    // 调用时将this指向obj

​                    callback.call(obj);

​                });

​            }
​                    // // 大部分浏览器兼容方式

​                    // obj.addEventListener(eventStr, callback, false);


​                    // // ie8及一下

​                    // obj.attachEvent("on"+eventStr, callback);

​        }
```

### 事件的移除

### 对象.removeEventListener(参数一，参数二)

参数一：移除事件名

参数二：移除的回调函数

#### 事件的传播

ie8及一下没有事件的捕获。

微软认为事件的传播是从内往外传（从下往上）,就是当事件触发时，应该先触发当前元素上的事件在向当前元素的祖先元素上传播，也就是事件应该在冒泡阶段执行。

网景公司认为事件因该由外向内传播的，当事件触发时，应该先触发当前元素的祖先元素，再向内传播给后代元素。

W3C综合了两个公司的方案，将事件传播分成了三个阶段

**1.捕获阶段**

在捕获阶段时从最外层的祖先元素，向目标元素进行事件的捕获，但是默认时不会触发事件。

**2.目标阶段**

事件捕获到目标元素，捕获结束开始在目标元素上触发事件。

**3.冒泡阶段**

事件从目标元素向外传递，一次触发祖先元素上的事件。

**如果想要捕获阶段触发事件，可以将addEventListener()的第三个参数设置为true**

### DOM事件

一个事件的触发流程

1. 找到事件触发点（例如按钮）
2. 监听按钮上的触发事件
3. 写触发【点击】事件之后的逻辑
4. 找到按钮
5. 跟随逻辑改变

事件有很多例如（**单击双击，键盘，滚轮，鼠标移入移出**等等）

