# 搜索关键词重复解决办法

目的：

1. 让最新搜索的关键词，排序在最前方
2. 让搜索关键词不能重复



先看一下data中存储数据的情况：

```js
    data() {
      return {
        // 定时器,防抖
        timer: null,
        // 搜索关键字
        kw: '',
        // 搜索结果列表
        searchResults: [],
        
        // 搜索历史数据
        historyList: ['app', '123']
      };
    }
```



核心：

解决关键词重复：用set将存储的数组进行去重，然后每次添加时，比较原先set是否拥有重复项，如果有就删除，然后再进行添加。

解决存储顺序：使用computed再加上数组的`reverse()`方法即可



```js
computed:  {
  histories() {
    // 反转一下
    return [...this.historyList].reverse()
  }
},
methods: {
  saveSearchHistory() {
    // this.historyList.push(this.kw);

    // 1.将数组转换为set,保证已有内容不重复
    const set = new Set(this.historyList);
    // 2.每次添加时，先删除一下set中对应的关键字
    set.delete(this.kw);
    // 3.再添加进去
    set.add(this.kw);
    // 4.再转换为数组
    this.historyList = Array.from(set);
  }
}
```

