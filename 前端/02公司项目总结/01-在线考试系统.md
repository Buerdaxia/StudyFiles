# 在线考试系统管理端



## 1.新增编辑详情三合一

一般，我们都会选择将新增页面和编辑页面和详情页面写在同一个组件页面中，因为他们三个个有页面的**内容基本上一致**（除了一些特殊业务要求）。

不同的是：

一：页面打开时的区别

新增：页面打开时没有数据

编辑和详情：页面打开时有数据



二：提交时接口的区别

新增：提交时没有传递字段中**没有`id`**

编辑和详情：提交时传递字段中**包含`id`**



解决方式：

区别一：打开区别的解决方式：

在打开界面时，根据是否传递`ID`来判断是否调用详情接口

```js
activated() {
  //页面激活时获取考试id
  this.dataForm.id = this.$route.query.examId
  
  // 这里判断是否传递id，如果传递了，调用详情接口
  if (this.dataForm.id) {
    // 清空表单验证
    this.$nextTick(() => {
      this.$refs.dataForm.resetFields();
    });
    
    // 调用详情接口
    this.getExamInfo(); // 调用获取考试信息
  }
}
```



区别二：提交的解决方式

在提交时，也是通过id来进行判断来选择提交的接口

```js
dataFormSubmit() {
			// 如果考试id存在，则是编辑
			this.$refs.dataForm.validate(valid => {
				if (!valid) {
					return;
				}
				this.loading = true;
				//将字段的，排序重新整理一下
				this.dataForm.zxksFieldRos.forEach((item, index) => {
					item.sort = index;
				});
				//如果有id为编辑，没有为新增（这里进行url的判断）
				var url = '';
				if (this.dataForm.id) {
					url = '/zxks/exam/upd';
				} else {
					url = '/zxks/exam/add';
				}
				this.$http.post(url, this.dataForm).then(({data: res}) => {
					this.loading = false;
					if (res && res.code === 0) {
						this.$message({
							message: '操作成功',
							type: 'success',
							duration: 500
						});
						//关闭标签
						closeTab();
					} else {
						this.$message.error(res.msg);
					}
				});
			});
		},
```





## 2.`template`模板中的数据并非只是data中的，也可以是methods的返回结果

有时候，有些数据我们想简单加工一下，又不想使用`computed`，我们就可以直接利用methods的方法，来直接绑定

>注意：这是一个不适用computed的解决思路而已，其实我建议还是使用计算属性的

示例：

```vue

<template>
<!--例如一个一个表格数据我们需要简单加工一下-->
<el-table :data="getFieldRows()" stripe style="width: 100%">
</el-table>
</template>

<script>
	export default {
    data() {
      return {
        
      }
    },
   	methods: {
      //获取字段，分为固定部分和动态部分
      getFieldRows() {
        return xxx...;
      }
    }
  }
</script>
```



## 3.固定字段的处理方式

例如现在有以下需求：

表格前三行字段不能修改为固定字段(不一定非要在表格中，其他的一些类似业务也是这样的)，每次提交时都会带着这三个字段



姓名，证件类型，证件号码不能修改，并且每次提交时都携带着：

![01](../../前端图片/xlyl公司项目总结/在线考试系统/01.PNG)



这种处理，一般都是，我们会自己在data中声明好固定的数据，例如上面的姓名，证件类型，证件号码

示例：
```vue
<script>
	export default {
    data() {
      return {
        //固定的字段（我们自己创建好）
        fixedFieldRos: [
          {
            name: '姓名'
          },
          {
            name: '证件类型'
          },
          {
            name: '证件号码'
          }
        ]
      }
    }
  }
</script>
```

