# 分装图片预览组件

核心：

通过`v-if`切换是否显示图片

通过`@change`中的`e.target.files`获取input上传的图片文件

通过`URL.createObjectURL()`方法，将文件转换为`img`标签中的`src`属性可以加载的图片



`html`部分：

```html
<!-- 图片预览功能 -->
<img v-if="imgObjUrl" :src="imgObjUrl" class="preview" />
<TheIcon v-else icon="upload-image" />
<!-- 浏览器中的文件选择，accept属性限制接受文件只能为图片 -->
<input type="file" accept="image/*" class="fileChooser" @change="handleImageUpload" />
```



`js`部分：

```js
import { ref } from 'vue';
// 图片预览url
const imgObjUrl = ref('');
async function handleImageUpload(e) {
  // 这里只获取了1张图片
	const imageFile = e.target.files[0];
	// 这里将url转换
  if (imageFile) {
		imgObjUrl.value = URL.createObjectURL(imageFile);
	}
}
```



